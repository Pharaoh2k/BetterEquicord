name: Sync Fork with Upstream

on:
  schedule:
    - cron: "0 0 * * *"   # 00:00 UTC daily
  workflow_dispatch:

permissions:
  contents: write

jobs:
  sync:
    name: Sync with Upstream
    runs-on: ubuntu-latest
    steps:
      - name: Checkout target repo
        uses: actions/checkout@v4
        with:
          # Avoid persisting credentials from checkout; the action will push using GITHUB_TOKEN
          persist-credentials: false

      - name: Sync upstream changes
        uses: aormsby/Fork-Sync-With-Upstream-action@v3.4.1
        with:
          # Your fork branch to keep updated
          target_sync_branch: main
          # Always use GITHUB_TOKEN to push to your fork
          target_repo_token: ${{ secrets.GITHUB_TOKEN }}
          # Upstream repo + branch to pull from
          upstream_sync_repo: Equicord/Equicord
          upstream_sync_branch: main
          # If upstream is private, add: upstream_repo_access_token: ${{ secrets.UPSTREAM_PAT }}
          # Optional: make pulling stricter/faster or push behavior (see wiki)
          # upstream_pull_args: --ff-only --tags
          # target_branch_push_args: --force-with-lease
